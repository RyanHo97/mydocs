# 面试题



## 浏览器渲染原理

首先我们打开一个网页的时候,浏览器会去请求对应的html文件,然后通过将字节数据转化为字符串然后再通过编译原理的词法分析转化为
Token(标记),最后这些标记会转化为Node,然后这些Node会通过之间的联系转为DOM树.<font color="red">这个过程就是HTML文件转化为DOM树</font>

---

再解析HTML的时候,也会遇到CSS和JS文件,这时候浏览器也会去下载并且解析这些文件

---

从CSS到CSSDOM的过程与上面的过程也类似.

---

当我们生成DOM树和CSSDOM树以后,就需要把这两颗树组合为渲染树.当浏览器生成渲染树以后，就会根据渲染树来进行布局（也可以叫做回流），然后调用 GPU 绘制，合成图层，显示在屏幕上。

![图片](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/a71c46b79d364655ba35b9b87f6d133b~tplv-k3u1fbpfcp-zoom-in-crop-mark:3024:0:0:0.awebp)


## 引出的问题

- 为什么操作DOM会慢

因为 DOM 是属于渲染引擎中的东西，而 JS 又是 JS 引擎中的东西。当我们通过 JS 操作 DOM 的时候，其实这个操作涉及到了两个线程之间的通信，那么势必会带来一些性能上的损耗。操作 DOM 次数一多，也就等同于一直在进行线程之间的通信，并且操作 DOM 可能还会带来重绘回流的情况，所以也就导致了性能上的问题。

--- 


- 如何解决这些问题(插入几万个 DOM，如何实现页面不卡顿？)

采用虚拟列表的知识,这种技术的原理就是只渲染可视区域内的内容，非可见区域的那就完全不渲染了，当用户在滚动的时候就实时去替换渲染的内容。



